{
    "sourceFile": "frontend/src/components/MyRemainders.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1742390013123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1742390575278,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,92 +0,0 @@\n-import React, { useEffect, useState } from \"react\";\r\n-import { toast } from \"react-toastify\";\r\n-\r\n-const MyRemainders = () => {\r\n-  const [email, setEmail] = useState(\"\");\r\n-  const [remainders, setRemainders] = useState([]);\r\n-  const [allRemainders, setAllRemainders] = useState([]);\r\n-\r\n-  useEffect(() => {\r\n-    // 🛠️ LocalStorage se sabhi remainders fetch karo\r\n-    const savedRemainders =\r\n-      JSON.parse(localStorage.getItem(\"remainders\")) || [];\r\n-    setAllRemainders(savedRemainders);\r\n-  }, []);\r\n-\r\n-  const handleSearch = () => {\r\n-    if (!email) {\r\n-      toast.error(\"⚠️ Please enter an email!\");\r\n-      return;\r\n-    }\r\n-\r\n-    // 🛠️ Filter kar ke sirf us email wale remainder dikhao\r\n-    const userRemainders = allRemainders.filter((rem) => rem.email === email);\r\n-\r\n-    if (userRemainders.length === 0) {\r\n-      toast.info(\"🔍 No remainders found for this email!\");\r\n-    }\r\n-    setRemainders(userRemainders);\r\n-  };\r\n-\r\n-  const handleDelete = (id) => {\r\n-    const updatedRemainders = allRemainders.filter((rem) => rem.id !== id);\r\n-\r\n-    localStorage.setItem(\"remainders\", JSON.stringify(updatedRemainders));\r\n-    setAllRemainders(updatedRemainders);\r\n-\r\n-    // ✅ UI se bhi hatao\r\n-    const updatedUserRemainders = remainders.filter((rem) => rem.id !== id);\r\n-    setRemainders(updatedUserRemainders);\r\n-\r\n-    toast.error(\"❌ Remainder Deleted!\");\r\n-  };\r\n-\r\n-  return (\r\n-    <div className=\"container mt-5\">\r\n-      <h2 className=\"text-center\">Search Remainders by Email</h2>\r\n-\r\n-      {/* ✅ Email Search Input */}\r\n-      <div className=\"input-group mb-3\">\r\n-        <input\r\n-          type=\"email\"\r\n-          className=\"form-control\"\r\n-          placeholder=\"Enter Email\"\r\n-          value={email}\r\n-          onChange={(e) => setEmail(e.target.value)}\r\n-        />\r\n-        <button className=\"btn btn-primary\" onClick={handleSearch}>\r\n-          Search\r\n-        </button>\r\n-      </div>\r\n-\r\n-      {/* ✅ Remainders List */}\r\n-      {remainders.length === 0 ? (\r\n-        <p>No Remainders Found!</p>\r\n-      ) : (\r\n-        <div className=\"row\">\r\n-          {remainders.map((rem) => (\r\n-            <div key={rem.id} className=\"col-md-4 mb-4\">\r\n-              <div className=\"card shadow-sm\">\r\n-                <div className=\"card-body\">\r\n-                  <h5>{rem.title}</h5>\r\n-                  <p>\r\n-                    {rem.date} - {rem.time}\r\n-                  </p>\r\n-                  <p>{rem.message}</p>\r\n-                  <button\r\n-                    className=\"btn btn-danger btn-sm\"\r\n-                    onClick={() => handleDelete(rem.id)}\r\n-                  >\r\n-                    Delete\r\n-                  </button>\r\n-                </div>\r\n-              </div>\r\n-            </div>\r\n-          ))}\r\n-        </div>\r\n-      )}\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default MyRemainders;\r\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742390614696,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,71 @@\n+import React, { useEffect, useState } from \"react\";\r\n+import { toast } from \"react-toastify\";\r\n+\r\n+const MyRemainders = () => {\r\n+  const [userRemainders, setUserRemainders] = useState([]);\r\n+  const loggedInUser = JSON.parse(localStorage.getItem(\"user\"));\r\n+\r\n+  useEffect(() => {\r\n+    const allRemainders = JSON.parse(localStorage.getItem(\"allRemainders\")) || [];\r\n+\r\n+    // ✅ Sirf logged-in user ke remainders filter karo\r\n+    const currentUserRemainders = allRemainders.find(\r\n+      (rem) => rem.email === loggedInUser?.email\r\n+    );\r\n+\r\n+    setUserRemainders(currentUserRemainders?.remainder || []);\r\n+  }, [loggedInUser]);\r\n+\r\n+  const handleDelete = (id) => {\r\n+    const allRemainders = JSON.parse(localStorage.getItem(\"allRemainders\")) || [];\r\n+\r\n+    const updatedRemainders = allRemainders.map((user) => {\r\n+      if (user.email === loggedInUser?.email) {\r\n+        return {\r\n+          ...user,\r\n+          remainder: user.remainder.filter((rem) => rem.id !== id),\r\n+        };\r\n+      }\r\n+      return user;\r\n+    });\r\n+\r\n+    localStorage.setItem(\"allRemainders\", JSON.stringify(updatedRemainders));\r\n+\r\n+    const filteredRemainders = userRemainders.filter((rem) => rem.id !== id);\r\n+    setUserRemainders(filteredRemainders);\r\n+\r\n+    toast.error(\"❌ Remainder Deleted!\");\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"container mt-5\">\r\n+      <h2 className=\"text-center\">My Remainders</h2>\r\n+\r\n+      {userRemainders.length === 0 ? (\r\n+        <p>No Remainders Found!</p>\r\n+      ) : (\r\n+        <div className=\"row\">\r\n+          {userRemainders.map((rem) => (\r\n+            <div key={rem.id} className=\"col-md-4 mb-4\">\r\n+              <div className=\"card shadow-sm\">\r\n+                <div className=\"card-body\">\r\n+                  <h5>{rem.title}</h5>\r\n+                  <p>{rem.date} - {rem.time}</p>\r\n+                  <p>{rem.message}</p>\r\n+                  <button\r\n+                    className=\"btn btn-danger btn-sm\"\r\n+                    onClick={() => handleDelete(rem.id)}\r\n+                  >\r\n+                    Delete\r\n+                  </button>\r\n+                </div>\r\n+              </div>\r\n+            </div>\r\n+          ))}\r\n+        </div>\r\n+      )}\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default MyRemainders;\r\n"
                }
            ],
            "date": 1742390013123,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst MyRemainders = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [remainders, setRemainders] = useState([]);\r\n  const [allRemainders, setAllRemainders] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // 🛠️ LocalStorage se sabhi remainders fetch karo\r\n    const savedRemainders =\r\n      JSON.parse(localStorage.getItem(\"remainders\")) || [];\r\n    setAllRemainders(savedRemainders);\r\n  }, []);\r\n\r\n  const handleSearch = () => {\r\n    if (!email) {\r\n      toast.error(\"⚠️ Please enter an email!\");\r\n      return;\r\n    }\r\n\r\n    // 🛠️ Filter kar ke sirf us email wale remainder dikhao\r\n    const userRemainders = allRemainders.filter(\r\n      (rem) => rem.email === email\r\n    );\r\n\r\n    if (userRemainders.length === 0) {\r\n      toast.info(\"🔍 No remainders found for this email!\");\r\n    }\r\n    setRemainders(userRemainders);\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    const updatedRemainders = allRemainders.filter(\r\n      (rem) => rem.id !== id\r\n    );\r\n\r\n    localStorage.setItem(\"remainders\", JSON.stringify(updatedRemainders));\r\n    setAllRemainders(updatedRemainders);\r\n\r\n    // ✅ UI se bhi hatao\r\n    const updatedUserRemainders = remainders.filter(\r\n      (rem) => rem.id !== id\r\n    );\r\n    setRemainders(updatedUserRemainders);\r\n\r\n    toast.error(\"❌ Remainder Deleted!\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2 className=\"text-center\">Search Remainders by Email</h2>\r\n\r\n      {/* ✅ Email Search Input */}\r\n      <div className=\"input-group mb-3\">\r\n        <input\r\n          type=\"email\"\r\n          className=\"form-control\"\r\n          placeholder=\"Enter Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          onClick={handleSearch}\r\n        >\r\n          Search\r\n        </button>\r\n      </div>\r\n\r\n      {/* ✅ Remainders List */}\r\n      {remainders.length === 0 ? (\r\n        <p>No Remainders Found!</p>\r\n      ) : (\r\n        <div className=\"row\">\r\n          {remainders.map((rem) => (\r\n            <div key={rem.id} className=\"col-md-4 mb-4\">\r\n              <div className=\"card shadow-sm\">\r\n                <div className=\"card-body\">\r\n                  <h5>{rem.title}</h5>\r\n                  <p>{rem.date} - {rem.time}</p>\r\n                  <p>{rem.message}</p>\r\n                  <button\r\n                    className=\"btn btn-danger btn-sm\"\r\n                    onClick={() => handleDelete(rem.id)}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyRemainders;\r\n"
        }
    ]
}