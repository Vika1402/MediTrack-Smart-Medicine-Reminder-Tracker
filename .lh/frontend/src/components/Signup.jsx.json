{
    "sourceFile": "frontend/src/components/Signup.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1741765169790,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1741765169790,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axiosInstant from \"../utils/axiosInstant\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Signup = () => {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    age: \"\",\r\n    gender: \"\",\r\n    bloodGroup: \"\",\r\n    address: \"\",\r\n    phoneNumber: \"\",\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Handle input change\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Submitting form with data:\", formData); // Debugging log\r\n\r\n    try {\r\n      setLoading(true);\r\n      const res = await axiosInstant.post(\"/api/user/register\", formData);\r\n      console.log(\"Server Response:\", res.data); // Debugging log\r\n\r\n      if (res.data.success) {\r\n        toast.success(res.data.message);\r\n\r\n        // Reset form fields\r\n        setFormData({\r\n          name: \"\",\r\n          email: \"\",\r\n          password: \"\",\r\n          age: \"\",\r\n          gender: \"\",\r\n          bloodGroup: \"\",\r\n          address: \"\",\r\n          phoneNumber: \"\",\r\n        });\r\n\r\n        // Navigate to login page after success\r\n        setTimeout(() => {\r\n          console.log(\"Navigating to login...\"); // Debugging log\r\n          navigate(\"/login\");\r\n        }, 2000);\r\n      } else {\r\n        toast.error(res.data.message || \"Signup failed!\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Signup Error:\", error.response?.data || error);\r\n      toast.error(error.response?.data?.message || \"Something went wrong!\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"signup\">\r\n      <form onSubmit={handleSubmit}>\r\n        <h2>Signup</h2>\r\n        <h6>\r\n          <i>* Only for new Users</i> <br />\r\n          <i>* If already signed in then login</i> <br />\r\n          <i>* Password must be 8 characters long</i> <br />\r\n          <i>* Use a strong password mixed with characters and letters</i>\r\n        </h6>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Name</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name=\"name\"\r\n            value={formData.name}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Email address</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"email\"\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <div className=\"form-text\">\r\n            We'll never share your email with anyone else.\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            required\r\n            minLength=\"8\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Age</label>\r\n          <input\r\n            type=\"number\"\r\n            className=\"form-control\"\r\n            name=\"age\"\r\n            value={formData.age}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Gender</label>\r\n          <select\r\n            className=\"form-select\"\r\n            name=\"gender\"\r\n            value={formData.gender}\r\n            onChange={handleChange}\r\n            required\r\n          >\r\n            <option value=\"\">Select</option>\r\n            <option value=\"Male\">Male</option>\r\n            <option value=\"Female\">Female</option>\r\n            <option value=\"Transgender\">Transgender</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Blood Group</label>\r\n          <select\r\n            className=\"form-select\"\r\n            name=\"bloodGroup\"\r\n            value={formData.bloodGroup}\r\n            onChange={handleChange}\r\n            required\r\n          >\r\n            <option value=\"\">Select</option>\r\n            <option value=\"A+\">A+</option>\r\n            <option value=\"A-\">A-</option>\r\n            <option value=\"B+\">B+</option>\r\n            <option value=\"B-\">B-</option>\r\n            <option value=\"O+\">O+</option>\r\n            <option value=\"O-\">O-</option>\r\n            <option value=\"AB+\">AB+</option>\r\n            <option value=\"AB-\">AB-</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Address</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name=\"address\"\r\n            value={formData.address}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Phone number</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name=\"phoneNumber\"\r\n            value={formData.phoneNumber}\r\n            onChange={handleChange}\r\n            placeholder=\"Must be a 10-digit number\"\r\n            required\r\n            pattern=\"\\d{10}\"\r\n          />\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\r\n          {loading ? \"Please wait...\" : \"Submit\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n"
        }
    ]
}